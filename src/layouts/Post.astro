---
import type { CollectionEntry } from "astro:content";
import { format } from "date-fns";
import BaseHead from "../components/BaseHead.astro";
import HomeHeader from "../components/HomeHeader.astro";
import { slugify } from "../lib/util";

type Props = CollectionEntry<"post">["data"];

const { title, date, tags } = Astro.props;
const formattedDate = format(date, "MMMM dd, yyyy");

const tagItems = tags.map((name) => ({
  name,
  slug: slugify(name),
}));
---

<html lang="ja">
  <head>
    <BaseHead title={title} description={""} />
    <style>
      .post-title {
        background: linear-gradient(
          90deg,
          rgb(59, 154, 201),
          rgb(152, 59, 201)
        );
        background-clip: text;
        color: transparent;
      }
    </style>
    <style is:inline>
      .post-content {
        h2 {
          font-size: 1.85rem;
          font-weight: 600;
          margin: 2rem 0 1rem;
          padding-top: 0.875rem;
        }
        p {
          margin: 1.2rem 0;
        }
        p code {
          font-size: 1rem;
          font-family: monospace;
          background: #f3f4f6;
          border-radius: 4px;
          padding: 2px 6px;
        }
        pre:has(code) {
          font-size: 0.8rem;
          padding: 0.8rem;
          border: 2px solid #aaa;
          border-radius: 4px;
        }
      }
    </style>
  </head>
  <body>
    <main class="max-w-[740px] mx-auto px-5 pb-24">
      <HomeHeader />
      <article>
        <h1 class="mt-8 mb-4 text-4xl font-semibold post-title">{title}</h1>
        <p class="text-gray-600 text-sm my-12 mb-6">{formattedDate}</p>
        <ul class="mb-16">
          {
            tagItems.map((tag) => (
              <li class="inline-block m-2 ml-0">
                <a
                  href={`/tags/${tag.slug}`}
                  class=" text-gray-600 bg-gray-100 no-underline text-xs rounded-sm px-3 py-1.5"
                >{`#${tag.name}`}</a>
              </li>
            ))
          }
        </ul>
        <div class="post-content">
          <slot />
        </div>
      </article>
    </main>
  </body>
</html>
